{"version":3,"sources":["images/back-btn.png","images/meteor.png","images/box.png","images/box_open.png","images/listen.png","images/speak.png","images/normal-btn.png","images/secret-btn.png","images/see.png","images/submit.png","images/desc.png","images/desc-check.png","images/cloud.png","images/cloud_dark.png","images/star.png","images/moon.png","images/sun.png","components/Meteor.js","components/Cloud.js","components/Router.js","components/Fade.js","UtilAPI.js","config.js","pages/Index.js","components/ContentBox.js","pages/Home.js","pages/SwitchBox.js","pages/Listen.js","pages/Password.js","pages/Speak.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Meteor","count","spawnMeteorPos","xyz","window","innerWidth","Math","random","key","targetMeteorPos","offset","useTransition","Array","fill","map","item","from","enter","next","a","config","duration","props","img","style","transform","interpolate","x","y","z","src","meteorImg","className","Cloud","cloudAnim","useSpring","opacity","start","to","end","cloudImg","alt","HistoryContext","React","createContext","push","back","path","Router","defaultPage","useState","route","setRoute","index","this","history","params","length","pop","reset","Provider","value","position","top","left","color","Fade","delay","anim","div","children","waitFor","mills","Promise","resolve","setTimeout","reqRoot","fadeDuration","openBoxDuration","cloudFadeTime","wordsFadeDuration","defaultHeartWords","request","readBox","pushBox","readSecret","pushSecret","text","isPC","pcDesc","pushFailed","networkError","guide","inputWords","wordsMaxLength","passwordRepeat","inputPassword","passwordMaxLength","passwordError","readFailed","Index","useContext","openBox","setOpenBox","clickBox","onOpenBox","boxOpenImg","boxImg","onClick","ContentBox","Home","exitToggle","setExitToggle","switchFunc","func","alignItems","speakBtn","listenBtn","SwitchBox","fadeOut","switchBox","box","prePage","justifyContent","normalBtn","secretBtn","backBtn","Listen","type","secretWords","heartWords","setHeartWords","wordsOut","setWordsOut","loading","setLoading","getHeart","fetch","res","json","data","box_message","alert","console","error","width","height","seeBtn","Password","password","submitPassword","code","secret","encodeURIComponent","method","display","placeholder","maxLength","onChange","event","target","Speak","check","onSubmit","flexDirection","overflow","descCheckImg","descImg","defaultValue","e","submitBtn","innerHeight","preloadImages","cloudDarkImg","starImg","moonImg","sunImg","backBtnImg","listenImg","normalBtnImg","secretlBtnImg","seeImg","speakImg","submitImg","App","mobile","userAgentInfo","navigator","userAgent","Agents","v","indexOf","isMobile","backgroundAnim","background","clouds","zIndex","pages","home","listen","speak","loadingIndicator","images","autoResolveDelay","onError","loadAssetError","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.785f284f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/back-btn.6ede6a0b.png\";","module.exports = __webpack_public_path__ + \"static/media/meteor.f635af1a.png\";","module.exports = __webpack_public_path__ + \"static/media/box.7585be2a.png\";","module.exports = __webpack_public_path__ + \"static/media/box_open.41631041.png\";","module.exports = __webpack_public_path__ + \"static/media/listen.2eabb05c.png\";","module.exports = __webpack_public_path__ + \"static/media/speak.8f57d86c.png\";","module.exports = __webpack_public_path__ + \"static/media/normal-btn.74f9828b.png\";","module.exports = __webpack_public_path__ + \"static/media/secret-btn.15ed08bd.png\";","module.exports = __webpack_public_path__ + \"static/media/see.fac6e153.png\";","module.exports = __webpack_public_path__ + \"static/media/submit.015a82dd.png\";","module.exports = __webpack_public_path__ + \"static/media/desc.b59ccc40.png\";","module.exports = __webpack_public_path__ + \"static/media/desc-check.a2143cff.png\";","module.exports = __webpack_public_path__ + \"static/media/cloud.9d855979.png\";","module.exports = __webpack_public_path__ + \"static/media/cloud_dark.50a129df.png\";","module.exports = __webpack_public_path__ + \"static/media/star.7f649c3e.png\";","module.exports = __webpack_public_path__ + \"static/media/moon.8cf6cae2.png\";","module.exports = __webpack_public_path__ + \"static/media/sun.35b61d27.png\";","import React from 'react';\r\nimport { animated, useTransition } from 'react-spring';\r\nimport meteorImg from '../images/meteor.png';\r\n\r\nconst Meteor = () => {\r\n  let count = 0;\r\n  const spawnMeteorPos = () => {\r\n    return {\r\n      xyz: [\r\n        window.innerWidth + 500 + Math.random() * 1000,\r\n        300 + Math.random() * -600,\r\n        ((Math.random() * -360) / window.innerWidth) * 400\r\n      ],\r\n      key: `meteors-${count++}`\r\n    };\r\n  };\r\n\r\n  const targetMeteorPos = xyz => {\r\n    const offset = Math.random() * 1000 + 200;\r\n    return [0 - offset, (xyz[1] + offset) * 0.7 + (200 - xyz[2]) / 200, xyz[2]];\r\n  };\r\n\r\n  const meteorAnim = useTransition(\r\n    new Array(20).fill(0).map(() => spawnMeteorPos()),\r\n    item => item.key,\r\n    {\r\n      from: item => ({ xyz: item.xyz }),\r\n      enter: item => async next => {\r\n        while (1) {\r\n          await next({\r\n            xyz: targetMeteorPos(item.xyz),\r\n\r\n            config: {\r\n              duration: (3 * item.xyz[2] * item.xyz[2]) / 8 + 10000\r\n            }\r\n          });\r\n\r\n          await next({\r\n            xyz: spawnMeteorPos().xyz,\r\n            config: {\r\n              duration: 1\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  );\r\n  return meteorAnim.map(({ props, key }) => {\r\n    return (\r\n      <animated.img\r\n        key={key}\r\n        style={{\r\n          transform: props.xyz.interpolate(\r\n            (x, y, z) =>\r\n              `perspective(150px) translate3d(${x}px, ${y}px, ${z}px)`\r\n          )\r\n        }}\r\n        src={meteorImg}\r\n        className=\"meteor\"\r\n      />\r\n    );\r\n  });\r\n};\r\n\r\nexport default Meteor;\r\n","import React from 'react';\r\nimport { animated, useSpring } from 'react-spring';\r\n\r\nconst Cloud = props => {\r\n  const cloudAnim = useSpring({\r\n    from: {\r\n      opacity: props.start\r\n    },\r\n    to: async next => {\r\n      while (1) {\r\n        await next({\r\n          opacity: props.end\r\n        });\r\n        await next({\r\n          opacity: props.start\r\n        });\r\n      }\r\n    },\r\n    config: { duration: props.duration }\r\n  });\r\n  return (\r\n    <animated.img\r\n      src={props.cloudImg}\r\n      alt=\"CloudDark\"\r\n      className=\"cloud\"\r\n      style={{ ...cloudAnim, ...props.style }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Cloud;\r\n","import React, { useState } from 'react';\r\n\r\nexport const HistoryContext = React.createContext({\r\n  push: () => null,\r\n  back: () => null,\r\n  path: () => ''\r\n});\r\n\r\nconst Router = props => {\r\n  const { config, defaultPage } = props;\r\n  const [route, setRoute] = useState(defaultPage);\r\n\r\n  function History(index) {\r\n    this.history = [index];\r\n    this.params = {};\r\n\r\n    this.back = function() {\r\n      if (this.history.length > 1) {\r\n        this.history.pop();\r\n        setRoute(this.path());\r\n      }\r\n    };\r\n    this.push = function(path) {\r\n      this.history.push(path);\r\n      setRoute(this.path());\r\n    };\r\n\r\n    this.reset = () => (this.history = [index]);\r\n    this.path = () => this.history[this.history.length - 1];\r\n  }\r\n\r\n  const [history] = useState(new History(defaultPage));\r\n  return (\r\n    <HistoryContext.Provider value={history}>\r\n      {config[route]}\r\n      <div style={{\r\n        position: \"absolute\",\r\n        top: \"0\",\r\n        left: \"0\",\r\n        color: \"white\"\r\n      }}>DEBUG: {route}</div>\r\n    </HistoryContext.Provider>\r\n  );\r\n};\r\n\r\nexport default Router;\r\n","import React from 'react';\r\nimport { useSpring, animated } from 'react-spring';\r\nexport default function Fade(props) {\r\n  const { from, to, duration, delay } = props;\r\n  const anim = useSpring({\r\n    from: { opacity: from },\r\n    to: { opacity: to },\r\n    delay: delay || 0,\r\n    config: { duration: duration || 1000 }\r\n  });\r\n  return <animated.div {...props} style={{...props.style, ...anim}}>{props.children}</animated.div>;\r\n}\r\n","\r\n// 等待 N 秒后执行\r\nexport const waitFor = mills =>\r\n  new Promise(resolve => {\r\n    setTimeout(resolve, mills);\r\n  });\r\n\r\n","/** 配置项目中一些变量，我猜产品肯定会改需求 */\r\nconst reqRoot = 'http://39.96.42.33:8080';\r\nexport default {\r\n  fadeDuration: 300, // 淡入淡出时间\r\n  openBoxDuration: 2500, // 打开盒子时间\r\n  cloudFadeTime: 3000, // 云彩淡入淡出一次的时间\r\n  wordsFadeDuration: 400,\r\n  defaultHeartWords:\r\n    '你知道吗\\n你将会听到\\n一个在跨年夜\\n希望你幸福的人\\nta的心声',\r\n  // 请求对象网址\r\n  request: {\r\n    readBox: `${reqRoot}/r_box`,\r\n    pushBox: `${reqRoot}/w_box`,\r\n    readSecret: `${reqRoot}/r_secret`,\r\n    pushSecret: `${reqRoot}/w_secret`\r\n  },\r\n  // 文案\r\n  text: {\r\n    isPC: '请使用手机访问',\r\n    pcDesc:\r\n      ' “山东大学学生在线”网站是在山东大学党委学生工作部领导下，由学生自主设计、运行和管理的大型思政类学生网站，是山东大学“国家大学生文化素质教育基地”的重要组成部分，对校园文明建设起到了积极的推动作用，在山东大学乃至全国高校中产生了深远的影响，是国内一流的高校学生网站。',\r\n    pushBox:\r\n      '“咔啦”，你的小盒子已经关上了。它将被投入秘密河床，被随机一个陌生人捞起。',\r\n    pushSecret:\r\n      '“咔啦”，你的小盒子已经锁上了。将你的密码告诉收信人，输入密码，ta将打开你的神秘盒子。密码：',\r\n    pushFailed: '盒子不小心落进其他的河床了，重新试试吧~',\r\n    networkError: '网络有一点问题呢，重新刷新一下吧~',\r\n    guide: `这是一个在时间和空间中永存的盒子，是只有你知道的时光胶囊。\r\n你心里是不是一直有一段想说出的话，装在一个上锁的盒子里，没有遇到合适的机遇，将它带到世上来？点击左下角【说】，将话语从你心里的盒子拿出，放进秘密河床里的盒子，寄给注定的那个人。\r\n你是慕名而来，手上攥着一把秘钥吗？或者只是一个流浪者，想在河床上没有上锁的盒子里找到动人的话语？点击右下角【听】，我们将把注定是你的盒子，送到你的耳边。`,\r\n    inputWords: '盒子里小于5个字的话，不能被人捞起哦~',\r\n    wordsMaxLength: '盒子里大于500个字的话，不能被人捞起哦~',\r\n    passwordRepeat: '同样的秘钥已经给过其他人啦，另外选一把吧~',\r\n    inputPassword: '你还没有定制秘钥~',\r\n    passwordMaxLength:\r\n      '秘钥太长啦，没有与之匹配的锁芯喔。小于20位的秘钥才有匹配的锁芯~',\r\n    passwordError: '秘钥是不是拿错啦？重新试试吧。',\r\n    readFailed: '盒子不小心落进其他的河床了，重新试试吧~'\r\n  }\r\n};\r\n","import React, { useContext, useState } from 'react';\r\nimport boxImg from '../images/box.png';\r\nimport boxOpenImg from '../images/box_open.png';\r\nimport { HistoryContext } from '../components/Router';\r\nimport Fade from '../components/Fade';\r\nimport { waitFor } from '../UtilAPI';\r\nimport config from 'config';\r\n\r\n// 首页\r\n// 逻辑：点击盒子后，盒子打开，由黑夜变成白天，进入功能选择页面\r\nconst Index = props => {\r\n  const history = useContext(HistoryContext);\r\n  const [openBox, setOpenBox] = useState(false);\r\n  const {openBoxDuration} = config;\r\n  const clickBox = async () => {\r\n    if (openBox) return;\r\n    // 1.盒子打开\r\n    setOpenBox(true);\r\n    // 2.黑夜变到白天\r\n    await props.onOpenBox();\r\n    // 3.进入功能页面\r\n    await waitFor(500 + openBoxDuration);\r\n    history.push('home');\r\n  };\r\n  return (\r\n    <Fade from={1.0} to={openBox ? 0 : 1.0} delay={openBoxDuration + 500} duration={openBoxDuration}>\r\n      <img\r\n        src={openBox ? boxOpenImg : boxImg}\r\n        alt=\"Box\"\r\n        className=\"box\"\r\n        onClick={clickBox}\r\n      />\r\n    </Fade>\r\n  );\r\n};\r\n\r\nexport default Index;\r\n","import React from 'react';\r\nimport './styles/ContentBox.css';\r\n\r\nconst ContentBox = props => {\r\n  return (\r\n    <div {...props} className={`cnt-box ${props.className || ''}`}>\r\n      <div className=\"cnt\">{props.children}</div>\r\n    </div>\r\n  );\r\n};\r\nexport default ContentBox;\r\n","import React, { useContext, useState } from 'react';\r\nimport { HistoryContext } from '../components/Router';\r\nimport Fade from '../components/Fade';\r\nimport { waitFor } from '../UtilAPI';\r\nimport ContentBox from '../components/ContentBox';\r\nimport listenBtn from '../images/listen.png';\r\nimport speakBtn from '../images/speak.png';\r\nimport config from 'config';\r\n// 引导页\r\n// 逻辑：说、听、文本\r\nconst Home = () => {\r\n  const [exitToggle, setExitToggle] = useState(false);\r\n  const history = useContext(HistoryContext);\r\n  const switchFunc = async func => {\r\n    if (exitToggle) return;\r\n    setExitToggle(true);\r\n    await waitFor(config.fadeDuration);\r\n    history.params[\"func\"] = func;\r\n    history.push('switch-box');\r\n  };\r\n\r\n  return (\r\n    <Fade from={0} to={exitToggle ? 0.0 : 1.0} className=\"cntr full-screen\" duration={config.fadeDuration}>\r\n      <div className=\"size-auto cntr\" style={{ alignItems: 'space-around' }}>\r\n        <ContentBox>\r\n          {config.text.guide}\r\n        </ContentBox>\r\n      </div>\r\n      <div className=\"btn-cntr\">\r\n        <img\r\n          src={speakBtn}\r\n          alt=\"说\"\r\n          onClick={() => switchFunc('speak')}\r\n          className=\"img-btn\"\r\n        />\r\n        <img\r\n          src={listenBtn}\r\n          alt=\"听\"\r\n          onClick={() => switchFunc('listen')}\r\n          className=\"img-btn\"\r\n        />\r\n      </div>\r\n    </Fade>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useContext, useState } from 'react';\r\nimport { HistoryContext } from '../components/Router';\r\nimport Fade from '../components/Fade';\r\nimport { waitFor } from '../UtilAPI';\r\nimport backBtn from '../images/back-btn.png';\r\nimport normalBtn from '../images/normal-btn.png';\r\nimport secretBtn from '../images/secret-btn.png';\r\nimport config from 'config';\r\n// 选择盒子页面\r\n// 如果是普通盒子，直接进入\r\n// 如果是秘密盒子，听的话进入密码页面，说的话进入输入页面\r\nconst SwitchBox = () => {\r\n  const [exitToggle, setExitToggle] = useState(false);\r\n  const history = useContext(HistoryContext);\r\n\r\n  const fadeOut = async () => {\r\n    setExitToggle(true);\r\n    await waitFor(config.fadeDuration);\r\n  };\r\n\r\n  const switchBox = async box => {\r\n    if (exitToggle) return;\r\n    await fadeOut();\r\n    const { func } = history.params; // listen or speak\r\n    history.params['type'] = box; // normal or secret\r\n    if (box === 'normal') {\r\n      // 普通盒子\r\n      history.push(func);\r\n    } else {\r\n      if (func === 'listen') {\r\n        // 如果是听，先输密码\r\n        history.push('password');\r\n      } else {\r\n        history.push(func);\r\n      }\r\n    }\r\n  };\r\n\r\n  const prePage = async () => {\r\n    if (exitToggle) return;\r\n    await fadeOut();\r\n    history.back();\r\n  };\r\n  return (\r\n    <Fade\r\n      from={0}\r\n      to={exitToggle ? 0.0 : 1.0}\r\n      className=\"cntr full-screen\"\r\n      style={{\r\n        alignItems: 'center'\r\n      }}\r\n      duration={config.fadeDuration}\r\n    >\r\n      <div\r\n        className=\"btn-cntr\"\r\n        style={{\r\n          justifyContent: 'center'\r\n        }}\r\n      >\r\n        <img\r\n          src={normalBtn}\r\n          alt=\"小盒子\"\r\n          onClick={() => switchBox('normal')}\r\n          className=\"box-btn mr\"\r\n        />\r\n        <img\r\n          src={secretBtn}\r\n          alt=\"神秘盒子\"\r\n          onClick={() => switchBox('secret')}\r\n          className=\"box-btn ml\"\r\n        />\r\n      </div>\r\n      <img src={backBtn} alt=\"返回\" onClick={prePage} className=\"img-btn\" />\r\n    </Fade>\r\n  );\r\n};\r\n\r\nexport default SwitchBox;\r\n","import React, { useContext, useState } from 'react';\r\nimport { HistoryContext } from '../components/Router';\r\nimport Fade from '../components/Fade';\r\nimport { waitFor } from 'UtilAPI';\r\nimport ContentBox from 'components/ContentBox';\r\nimport backBtn from 'images/back-btn.png';\r\nimport seeBtn from 'images/see.png';\r\nimport config from 'config';\r\n// 查看盒子\r\nconst Listen = () => {\r\n  const history = useContext(HistoryContext);\r\n  const { type, secretWords } = history.params;\r\n  const [heartWords, setHeartWords] = useState(\r\n    type === 'secret' ? secretWords || '' : config.defaultHeartWords\r\n  );\r\n  const [wordsOut, setWordsOut] = useState(false);\r\n  const [exitToggle, setExitToggle] = useState(false);\r\n\r\n  const fadeOut = async () => {\r\n    setExitToggle(true);\r\n    await waitFor(config.fadeDuration);\r\n  };\r\n\r\n  const prePage = async () => {\r\n    if (exitToggle) return;\r\n    await fadeOut();\r\n    history.back();\r\n    if (history.params.type === 'secret') history.back();\r\n  };\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const getHeart = async () => {\r\n    if (loading) return;\r\n    try {\r\n      setLoading(true);\r\n      setHeartWords('loading...');\r\n      const res = await fetch(config.request.readBox);\r\n      const json = await res.json();\r\n      setWordsOut(true);\r\n      await waitFor(config.wordsFadeDuration);\r\n      setHeartWords(json.data.box_message);\r\n      setWordsOut(false);\r\n      await waitFor(config.wordsFadeDuration);\r\n    } catch (e) {\r\n      alert(config.text.networkError);\r\n      console.error(e);\r\n      setLoading(false);\r\n    }\r\n    setLoading(false);\r\n  };\r\n  return (\r\n    <Fade\r\n      from={0}\r\n      to={exitToggle ? 0.0 : 1.0}\r\n      className=\"cntr full-screen\"\r\n      style={{\r\n        alignItems: 'center'\r\n      }}\r\n      duration={config.fadeDuration}\r\n    >\r\n      <ContentBox\r\n        style={{\r\n          width: '70%',\r\n          height: '30%'\r\n        }}\r\n      >\r\n        <Fade\r\n          from={1.0}\r\n          to={wordsOut ? 0.0 : 1.0}\r\n          duration={config.wordsFadeDuration}\r\n        >\r\n          {heartWords}\r\n        </Fade>\r\n      </ContentBox>\r\n      {type === 'secret' ? (\r\n        <br />\r\n      ) : (\r\n        <img\r\n          src={seeBtn}\r\n          alt=\"让我康康\"\r\n          onClick={getHeart}\r\n          className=\"img-btn mb mt\"\r\n        />\r\n      )}\r\n      <img src={backBtn} alt=\"返回\" onClick={prePage} className=\"img-btn\" />\r\n    </Fade>\r\n  );\r\n};\r\n\r\nexport default Listen;\r\n","import React, { useContext, useState } from 'react';\r\nimport { HistoryContext } from '../components/Router';\r\nimport Fade from '../components/Fade';\r\nimport { waitFor } from 'UtilAPI';\r\nimport backBtn from 'images/back-btn.png';\r\nimport config from 'config';\r\n// 查看盒子\r\nconst Password = () => {\r\n  const [exitToggle, setExitToggle] = useState(false);\r\n  let password = '';\r\n  const history = useContext(HistoryContext);\r\n  const fadeOut = async () => {\r\n    setExitToggle(true);\r\n    await waitFor(config.fadeDuration);\r\n  };\r\n\r\n  const prePage = async () => {\r\n    if (exitToggle) return;\r\n    await fadeOut();\r\n    history.back();\r\n  };\r\n\r\n  const { func } = history.params;\r\n  const [loading, setLoading] = useState(false);\r\n  const submitPassword = async () => {\r\n    if (loading) return;\r\n    try {\r\n      setLoading(true);\r\n      if (password.length === 0) {\r\n        alert(config.text.inputPassword);\r\n      } else if (password.length > 20) {\r\n        alert(config.text.passwordMaxLength);\r\n      } else if (func === 'listen') {\r\n        // 听，输入密码，跳转到听页面\r\n        const res = await fetch(\r\n          `${config.request.readSecret}?box_password=${password}`\r\n        );\r\n        const json = await res.json();\r\n        setLoading(false);\r\n        if (json.code === -1) {\r\n          alert(config.text.readFailed);\r\n        } else if (json.code === -2) {\r\n          alert(config.text.passwordError);\r\n        } else {\r\n          history.params['secretWords'] = json.data.box_message;\r\n          await fadeOut();\r\n          history.push(func);\r\n        }\r\n      } else {\r\n        // 发布心语\r\n        const secret = history.params['words-secret'];\r\n        const res = await fetch(\r\n          `${config.request.pushSecret}?box_message=${encodeURIComponent(\r\n            secret\r\n          )}&box_password=${encodeURIComponent(password)}`,\r\n          {\r\n            method: 'post'\r\n          }\r\n        );\r\n        const json = await res.json();\r\n        setLoading(false);\r\n        if (json.code === -1) {\r\n          alert(config.text.pushFailed);\r\n        } else if (json.code === -2) {\r\n          alert(config.text.passwordRepeat);\r\n        } else {\r\n          alert(config.text.pushSecret + password);\r\n          await fadeOut();\r\n          history.push('check');\r\n        }\r\n      }\r\n    } catch (e) {\r\n      // 此处不应该这么进行判断，但我懒得写了qwq\r\n      alert(config.text.networkError);\r\n      console.error(e);\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <Fade\r\n      from={0}\r\n      to={exitToggle ? 0.0 : 1.0}\r\n      className=\"cntr full-screen\"\r\n      style={{\r\n        alignItems: 'center'\r\n      }}\r\n      duration={config.fadeDuration}\r\n    >\r\n      <div\r\n        style={{\r\n          width: '100%',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center'\r\n        }}\r\n        className=\"mb\"\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"请输入你的密码\"\r\n          className=\"input-password\"\r\n          maxLength={20}\r\n          onChange={event => (password = event.target.value)}\r\n        />\r\n        <span\r\n          className=\"ml\"\r\n          style={{\r\n            color: 'white'\r\n          }}\r\n          onClick={submitPassword}\r\n        >\r\n          提 交\r\n        </span>\r\n      </div>\r\n      <br />\r\n      <img src={backBtn} alt=\"返回\" onClick={prePage} className=\"img-btn\" />\r\n    </Fade>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import React, { useContext, useState } from 'react';\r\nimport { HistoryContext } from '../components/Router';\r\nimport Fade from '../components/Fade';\r\nimport { waitFor } from 'UtilAPI';\r\nimport ContentBox from 'components/ContentBox';\r\nimport backBtn from 'images/back-btn.png';\r\nimport submitBtn from 'images/submit.png';\r\nimport descImg from 'images/desc.png';\r\nimport descCheckImg from 'images/desc-check.png';\r\nimport config from 'config';\r\n// 查看盒子\r\nconst Speak = props => {\r\n  const history = useContext(HistoryContext);\r\n  const { type } = history.params;\r\n  const [exitToggle, setExitToggle] = useState(false);\r\n  const { check } = props;\r\n  const fadeOut = async () => {\r\n    setExitToggle(true);\r\n    await waitFor(config.fadeDuration);\r\n  };\r\n\r\n  const prePage = async () => {\r\n    if (exitToggle) return;\r\n    await fadeOut();\r\n    if (check) {\r\n      history.reset();\r\n      history.params['words-' + type] = '';\r\n      history.push('home');\r\n    } else {\r\n      history.back();\r\n    }\r\n  };\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const onSubmit = async () => {\r\n    if (history.params['words-' + type].length === 0) {\r\n      alert(config.text.inputWords);\r\n      return;\r\n    } else if (history.params['words-' + type].length > 500) {\r\n      alert(config.text.wordsMaxLength);\r\n      return;\r\n    }\r\n    if (loading) return;\r\n    try {\r\n      setLoading(true);\r\n      if (type === 'normal') {\r\n        // 普通盒子，直接进行写入\r\n        const res = await fetch(\r\n          `${config.request.pushBox}?box_message=${encodeURIComponent(\r\n            history.params['words-' + type]\r\n          )}`,\r\n          {\r\n            method: 'post'\r\n          }\r\n        );\r\n\r\n        const json = await res.json();\r\n        if (json.code === 0) {\r\n          alert(config.text.pushBox);\r\n          await fadeOut();\r\n          setLoading(false);\r\n          history.push('check');\r\n          setExitToggle(false);\r\n        } else if (json.code === -1) {\r\n          setLoading(false);\r\n          alert(config.text.pushFailed);\r\n        }\r\n      } else {\r\n        // 密码盒子，进入输入密码页面\r\n        await fadeOut();\r\n        setLoading(false);\r\n        history.push('password');\r\n      }\r\n    } catch (e) {\r\n      alert(config.text.networkError);\r\n      console.error(e);\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <Fade\r\n      from={0}\r\n      to={exitToggle ? 0.0 : 1.0}\r\n      className=\"cntr full-screen\"\r\n      style={{\r\n        alignItems: 'center'\r\n      }}\r\n      duration={config.fadeDuration}\r\n    >\r\n      <div\r\n        className=\"size-auto\"\r\n        style={{\r\n          width: '100%',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          overflow: 'auto'\r\n        }}\r\n      >\r\n        <img\r\n          src={check ? descCheckImg : descImg}\r\n          alt=\"说出你想对ta说的话\"\r\n          style={{ width: '80%' }}\r\n          className=\"mb\"\r\n        />\r\n        <br />\r\n        <ContentBox\r\n          style={{\r\n            width: '70%',\r\n            height: '30vh'\r\n          }}\r\n        >\r\n          <textarea\r\n            className=\"editor\"\r\n            maxLength=\"500\"\r\n            defaultValue={history.params['words-' + type] || ''}\r\n            onChange={e => (history.params['words-' + type] = e.target.value)}\r\n          ></textarea>\r\n        </ContentBox>\r\n        <br />\r\n        <img\r\n          src={backBtn}\r\n          alt=\"返回\"\r\n          className=\"img-btn\"\r\n          onClick={prePage}\r\n        />\r\n      </div>\r\n\r\n      {check ? (\r\n        <br />\r\n      ) : (\r\n        <img\r\n          src={submitBtn}\r\n          alt=\"提交\"\r\n          className={`img-btn ${window.innerHeight < 1024 && 'mb'}`}\r\n          onClick={onSubmit}\r\n        />\r\n      )}\r\n    </Fade>\r\n  );\r\n};\r\n\r\nexport default Speak;\r\n","import React, { useState } from 'react';\nimport Meteor from 'components/Meteor';\nimport Cloud from 'components/Cloud';\nimport 'App.css';\nimport Index from 'pages/Index';\nimport Router from 'components/Router';\nimport { useSpring, animated } from 'react-spring';\nimport Fade from 'components/Fade';\nimport { waitFor } from 'UtilAPI';\nimport Home from 'pages/Home';\nimport SwitchBox from 'pages/SwitchBox';\nimport config from 'config';\nimport Listen from 'pages/Listen';\nimport Password from 'pages/Password';\nimport Speak from 'pages/Speak';\nimport { Preload } from 'react-preload';\n// 图片资源\nimport cloudImg from 'images/cloud.png';\nimport cloudDarkImg from 'images/cloud_dark.png';\nimport starImg from 'images/star.png';\nimport moonImg from 'images/moon.png';\nimport sunImg from 'images/sun.png';\nimport backBtnImg from 'images/back-btn.png';\nimport boxOpenImg from 'images/box_open.png';\nimport boxImg from 'images/box.png';\nimport descCheckImg from 'images/desc-check.png';\nimport descImg from 'images/desc.png';\nimport listenImg from 'images/listen.png';\nimport meteorImg from 'images/meteor.png';\nimport normalBtnImg from 'images/normal-btn.png';\nimport secretlBtnImg from 'images/secret-btn.png';\nimport seeImg from 'images/see.png';\nimport speakImg from 'images/speak.png';\nimport submitImg from 'images/submit.png';\n\nconst preloadImages = [\n  cloudImg,\n  cloudDarkImg,\n  starImg,\n  moonImg,\n  sunImg,\n  backBtnImg,\n  boxOpenImg,\n  boxImg,\n  descCheckImg,\n  descImg,\n  listenImg,\n  meteorImg,\n  normalBtnImg,\n  secretlBtnImg,\n  seeImg,\n  speakImg,\n  submitImg\n];\n\nconst isMobile = () => {\n  const userAgentInfo = navigator.userAgent;\n  const Agents = [\n    'Android',\n    'iPhone',\n    'SymbianOS',\n    'Windows Phone',\n    'iPad',\n    'iPod'\n  ];\n  for (let v = 0; v < Agents.length; v++) {\n    if (userAgentInfo.indexOf(Agents[v]) > 0) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst App = () => {\n  const mobile = isMobile();\n  const [openBox, setOpenBox] = useState(false);\n  const { openBoxDuration } = config;\n  const backgroundAnim = useSpring({\n    from: { background: 'linear-gradient(0deg, #202032, #3f3e50)' },\n    to: {\n      background: openBox\n        ? 'linear-gradient(0deg, #191a4f, #3a4887)'\n        : 'linear-gradient(0deg, #202032, #3f3e50)'\n    },\n    config: { duration: openBoxDuration }\n  });\n\n  if (!mobile) {\n    alert(config.text.isPC);\n    return (\n      <>\n        <h1>{config.text.isPC}</h1>\n        <p>{config.text.pcDesc}</p>\n      </>\n    );\n  }\n\n  const clouds = [\n    {\n      cloudImg,\n      start: 1.0,\n      end: 0.5,\n      duration: config.cloudFadeTime,\n      style: { zIndex: -998 },\n      key: 'light'\n    },\n    {\n      cloudImg: cloudDarkImg,\n      start: openBox ? 0.25 : 0.1,\n      end: openBox ? 1.0 : 0.3,\n      duration: config.cloudFadeTime,\n      style: { zIndex: -1000 },\n      key: 'dark'\n    }\n  ];\n  const pages = {\n    index: (\n      <Index\n        onOpenBox={async () => {\n          setOpenBox(true);\n          await waitFor(openBoxDuration);\n        }}\n      />\n    ),\n    home: <Home />,\n    'switch-box': <SwitchBox />,\n    listen: <Listen />,\n    speak: <Speak />,\n    password: <Password />,\n    check: <Speak check />\n  };\n\n  return (\n    <Preload\n      loadingIndicator={<div className=\"pre-loading\">Loading...</div>}\n      images={preloadImages}\n      autoResolveDelay={5000}\n      onError={() => {\n        alert(config.text.loadAssetError);\n      }}\n    >\n      {\n        <>\n          <Router config={pages} defaultPage={'index'} />\n          <animated.div className=\"bg\" style={backgroundAnim}>\n            <img className=\"moon\" src={moonImg} alt=\"moon\" />\n            <Fade\n              from={0.0}\n              to={openBox ? 0.8 : 0}\n              duration={openBoxDuration}\n              style={{ position: 'absoulte', width: '100%', height: '100%' }}\n            >\n              <img className=\"moon\" src={sunImg} alt=\"sun\" />\n            </Fade>\n            <Meteor />\n            <img src={starImg} alt=\"star\" className=\"star\" />\n            {clouds.map(v => (\n              <Cloud {...v} />\n            ))}\n          </animated.div>\n        </>\n      }\n    </Preload>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}